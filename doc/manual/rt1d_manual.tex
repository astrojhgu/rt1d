%%% rt1d

\documentclass[letterpaper,titlepage,12pt]{article}

%%% Preamble 

\setlength{\topmargin}{0in}
\setlength{\oddsidemargin}{0in}
\setlength{\evensidemargin}{0in}
\setlength{\textwidth}{6.5in}
\setlength{\textheight}{9in}
\setlength{\headheight}{0in}
\setlength{\headsep}{0in}
\setlength{\marginparsep}{0in}
\setlength{\marginparwidth}{0in}

\usepackage{amsmath, amsthm, amssymb}
\numberwithin{equation}{section}
\usepackage{graphicx}
\usepackage{pslatex}
\usepackage[pdfborder={0 0 0}]{hyperref}
\usepackage[all]{hypcap}

%%% Beginning of Document

\begin{document}
	
\author{Jordan Mirocha}	
	
\title{\Large {\bf rt1d: User's Manual}}
\date{Last Updated: \today}
\maketitle

\setcounter{tocdepth}{2}
\tableofcontents
\newpage

%%%
%% Introduction
%%%
\section{Introduction}


%%% 
%% Methods
%%%
\section{Methods}


%%% 
%% Classes
%%%
\section{Classes}
In order of appearance in \texttt{rt1d.py}.

\subsection{\texttt{InitializeGrid}}
\subsection{\texttt{InitializeIntegralTables}}
\subsection{\texttt{RadiationSource}}
\subsection{\texttt{Radiate}}

%%% 
%% Parameters
%%%
\section{Parameters}

\subsection{Problem Types}
These were added for convenience in January, 2011.  If you want to make changes to these test problems you can, just make sure \texttt{ProblemType} is the first (uncommented) line in your parameter file.  Additional parameters afterwards will be interpreted as usual.

\begin{description}
    
\item [\texttt{ProblemType = 1}] This will set up a standard test with known analytic solution: the propagation of an ionization front in an isothermal, hydrogen-only, static universe.  The spectrum used is monochromatic at $E = 13.6 \ \text{eV}$, with photon luminosity $L_{\nu} = 5\times 10^{48} \ s^{-1}$.  The initial density, temperature, and box size are the same as the values used in Test 1 of Wise \& Abel 2010. 

\item [\texttt{ProblemType = 2}] This problem is almost exactly the same as \texttt{ProblemType = 1}.  However, the temperature is allowed to evolve, and instead of using a monochromatic spectrum, we sample a $10^5$ K blackbody with four energy groups.  Again, the initial density, temperature, box size, and energy groups are the same as the values used in Test 1 of Wise \& Abel 2010.  

\item [\texttt{ProblemType = 2.1}] Same as \texttt{ProblemType = 2} for everything, except we use a continuous blackbody spectrum rather than a discrete one.

\end{description}

\subsection{Initial Conditions}
\begin{description}
    
\item [\texttt{DensityProfile}]  

\item [TemperatureProfile]  

\end{description}


\subsection{Control Parameters}


\subsection{Source Parameters}


\subsection{Physics Parameters}


\section{Analysis}
Since our datasets are small, we can read in the entire time evolution all at once.  To do this, type the following in a Python terminal:
\begin{verbatim}
import rt1d.analysis as rta
import pylab as pl

ds = rta.Analyze('./pf.dat')                # load parameter file and data
pl.loglog(ds.data[10].r, ds.data[10].x_HI)  # radius vs. neutral fraction
\end{verbatim}

%%% 
%% Start to Finish
%%%
\section{Start to Finish}


\section{Convergence}
In \texttt{rt1d/doc/examples} you will find directories containing convergence test suites for RT06 test problems 1 \& 2 (\texttt{RT06\_1\_ResolutionTestSuite} and \texttt{RT06\_2\_ResolutionTestSuite}).  Each of these directories contains the parameter files necessary to run these problems on grids containing $100 \times 2^n$ cells, where $n = 0,1,...6$.  If you want, you can run them all at once, though keep in mind the simulations with 100 cells will finish much much faster than those containing 6400 cells, so it might not be good to check out a node for this as most of the computation will be spent on 1 or 2 simulations.  For instance, you could do:
\begin{verbatim}
    cd rt1d/doc/examples/RT06_1_ResolutionTestSuite/c_infinite
    mpirun -np 4 python RT1D.py -b batch_list.dat
\end{verbatim}
I've included the same setup for $c \neq \infty$ in \texttt{rt1d/doc/examples/RT06\_1\_ResolutionTestSuite/c\_finite}, so you can see the differences (if any) caused by making the $c \rightarrow \infty$ approximation.









\end{document}



